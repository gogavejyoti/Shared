const headerMap = {
    'Required HC': 'requiredHC',
    'Available HC': 'availableHC',
    'Actual Attrition': 'actualAttrition',
    'Planned Attrition': 'plannedAttrition',
    'Actual Shrinkage': 'actualShrinkage',
    'Planned Shrinkage': 'plannedShrinkage',
    'Forecasted Hours': 'forecastedHours',
    'Actual Hours': 'actualHours'
};

const pivotData = (data) => {
    const grouped = {};
    data.forEach(d => {
        const key = `${d.geo}|${d.site}|${d.projectId}|${d.lob}|${d.week}|${d.month}`;
        if (!grouped[key]) grouped[key] = {
            geo: d.geo, site: d.site, projectId: d.projectId, lob: d.lob, week: d.week, month: d.month
        };
        const internalKey = headerMap[d.header];
        if (internalKey) grouped[key][internalKey] = d.value;
    });
    return Object.values(grouped);
};
