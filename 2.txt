// Step 3: Inject context into chat history
    var contextText = string.Join("\n\n", topMatches.Select(x => $"Q: {x.Question}\nA: {x.Answer}"));
    var fullHistory = new List<ChatMessage>();

    // Optional system message
    fullHistory.Add(new ChatMessage
    {
        Role = "system",
        Content = "You are an assistant. Use the provided Q&A context and maintain prior conversation understanding. Respond in Markdown format."
    });

    // Add semantic Q&A context
    fullHistory.Add(new ChatMessage
    {
        Role = "system",
        Content = $"Here is some helpful context:\n\n{contextText}"
    });

    // Append entire chat history (includes user query)
    fullHistory.AddRange(chatHistory);
