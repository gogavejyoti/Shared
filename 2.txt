function initializeDropdown($dropdown, label) {
    const $btn = $dropdown.find('.dropdown-btn');
    const $menu = $dropdown.find('.dropdown-menu');
    const $selectAll = $menu.find('input.select-all');
    const $checkboxes = $menu.find('input[type="checkbox"]').not('.select-all');

    // Handle individual checkbox change
    $checkboxes.on('change', function () {
        const total = $checkboxes.length;
        const checked = $checkboxes.filter(':checked').length;

        // If all individual checkboxes are checked, check "Select All"
        $selectAll.prop('checked', checked === total);
        updateLabel($btn, label, checked);
    });

    // Handle Select All change
    $selectAll.on('change', function () {
        const isChecked = $(this).is(':checked');
        $checkboxes.prop('checked', isChecked);
        updateLabel($btn, label, isChecked ? $checkboxes.length : 0);
    });
}

// Helper function to update dropdown label text
function updateLabel($btn, label, count) {
    if (count === 0) {
        $btn.text(`Select ${label}`);
    } else {
        $btn.text(`${count} ${label} selected`);
    }
}
