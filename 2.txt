group.columns.forEach((col, colIndex) => {
    const cell = document.createElement("td");
    const value = rowData.data?.[col] ?? "";
    const target = rowData.target?.[col];

    cell.textContent = value;

    if (!group.expanded && colIndex !== 0) {
        cell.classList.add("hidden");
    }

    // Apply per-row color coding based on its own target
    if (typeof value === "number" && typeof target === "number") {
        if (value >= target) {
            cell.style.backgroundColor = "#d4edda"; // green for met target
            cell.style.color = "#155724";
        } else {
            cell.style.backgroundColor = "#f8d7da"; // red for below target
            cell.style.color = "#721c24";
        }
    }

    tr.appendChild(cell);
});
